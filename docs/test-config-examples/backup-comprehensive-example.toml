# Comprehensive example configuration demonstrating all backup capabilities
# 
# This config demonstrates:
# - Multiple local repositories per job (2 each)
# - Direct remote backups (using SFTP in this example)
# - Copy-to operations (from first local repo to remote copy destination)

# ═══════════════════════════════════════════════════════════════════
# ROOT LV BACKUPS (logical_volume_root)
# ═══════════════════════════════════════════════════════════════════

[logical_volume_root.root]
vg_name = "vg0"
lv_name = "lv_root"
snapshot_size = "2G"
backup_source_path = "/"
exclude_paths = [
    "/dev",
    "/proc",
    "/sys",
    "/tmp",
    "/var/tmp",
    "/run",
    "/media",
    "/mnt",
]

# Local repo A with copy to remote
[[logical_volume_root.root.repositories]]
repo_path = "/path/to/backups/root-a"
password_file = "/path/to/restic-password.txt"
prune_keep_last = 5
prune_keep_daily = 3
prune_keep_weekly = 2
prune_keep_monthly = 1
prune_keep_yearly = 1

  [[logical_volume_root.root.repositories.copy_to]]
  repo = "sftp:backup-user@backup-server.example.com:/backups/root-copied"
  password_file = "/path/to/restic-password.txt"
  prune_keep_last = 50
  prune_keep_daily = 30
  prune_keep_weekly = 8
  prune_keep_monthly = 12
  prune_keep_yearly = 3

# Local repo B (no remote copy)
[[logical_volume_root.root.repositories]]
repo_path = "/path/to/backups/root-b"
password_file = "/path/to/restic-password.txt"
prune_keep_last = 10
prune_keep_daily = 7
prune_keep_weekly = 4
prune_keep_monthly = 6
prune_keep_yearly = 2

# Direct remote backup (SFTP example)
[[logical_volume_root.root.repositories]]
repo_path = "sftp:backup-user@backup-server.example.com:/backups/root-direct"
password_file = "/path/to/restic-password.txt"
prune_keep_last = 20
prune_keep_daily = 14
prune_keep_weekly = 6
prune_keep_monthly = 12
prune_keep_yearly = 3


# ═══════════════════════════════════════════════════════════════════
# DATA LV BACKUPS (logical_volume_nonroot)
# ═══════════════════════════════════════════════════════════════════

[logical_volume_nonroot.data-lv]
vg_name = "vg_data"
lv_name = "lv_data"
snapshot_size = "5G"
backup_source_path = "/data"
exclude_paths = []

# Local repo A with copy to remote
[[logical_volume_nonroot.data-lv.repositories]]
repo_path = "/path/to/backups/data-lv-a"
password_file = "/path/to/restic-password.txt"
prune_keep_last = 5
prune_keep_daily = 3
prune_keep_weekly = 2
prune_keep_monthly = 1
prune_keep_yearly = 1

  # Example: Copy to B2 backend
  [[logical_volume_nonroot.data-lv.repositories.copy_to]]
  repo = "b2:my-bucket:data-lv-copied"
  password_file = "/path/to/b2-password.txt"
  prune_keep_last = 50
  prune_keep_daily = 30
  prune_keep_weekly = 8
  prune_keep_monthly = 12
  prune_keep_yearly = 3

# Local repo B (no remote copy)
[[logical_volume_nonroot.data-lv.repositories]]
repo_path = "/path/to/backups/data-lv-b"
password_file = "/path/to/restic-password.txt"
prune_keep_last = 10
prune_keep_daily = 7
prune_keep_weekly = 4
prune_keep_monthly = 6
prune_keep_yearly = 2

# Example: Direct remote backup to S3
[[logical_volume_nonroot.data-lv.repositories]]
repo_path = "s3:s3.amazonaws.com/my-bucket/data-lv-direct"
password_file = "/path/to/restic-password.txt"
prune_keep_last = 20
prune_keep_daily = 14
prune_keep_weekly = 6
prune_keep_monthly = 12
prune_keep_yearly = 3


# ═══════════════════════════════════════════════════════════════════
# STANDARD PARTITION BACKUPS (standard_path)
# ═══════════════════════════════════════════════════════════════════

[standard_path.boot]
backup_source_path = "/boot"
exclude_paths = []
remount_readonly = true

# Local repo A with copy to remote
[[standard_path.boot.repositories]]
repo_path = "/path/to/backups/boot-a"
password_file = "/path/to/restic-password.txt"
prune_keep_last = 5
prune_keep_daily = 3
prune_keep_weekly = 2
prune_keep_monthly = 1
prune_keep_yearly = 1

  [[standard_path.boot.repositories.copy_to]]
  repo = "sftp:backup-user@backup-server.example.com:/backups/boot-copied"
  password_file = "/path/to/restic-password.txt"
  prune_keep_last = 50
  prune_keep_daily = 30
  prune_keep_weekly = 8
  prune_keep_monthly = 12
  prune_keep_yearly = 3

# Local repo B (no remote copy)
[[standard_path.boot.repositories]]
repo_path = "/path/to/backups/boot-b"
password_file = "/path/to/restic-password.txt"
prune_keep_last = 10
prune_keep_daily = 7
prune_keep_weekly = 4
prune_keep_monthly = 6
prune_keep_yearly = 2

# Direct remote backup
[[standard_path.boot.repositories]]
repo_path = "sftp:backup-user@backup-server.example.com:/backups/boot-direct"
password_file = "/path/to/restic-password.txt"
prune_keep_last = 20
prune_keep_daily = 14
prune_keep_weekly = 6
prune_keep_monthly = 12
prune_keep_yearly = 3
