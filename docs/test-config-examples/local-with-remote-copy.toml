# Local Backup with Remote Copy Example
#
# Fast local backup, then copy to remote for offsite protection.
# This is the RECOMMENDED approach for most users.
#
# Benefits:
#   - Fast backups (snapshot cleaned up quickly)
#   - Aggressive local pruning (save disk space)
#   - Conservative remote retention (long-term history)
#   - Network issues don't block backup completion
#
# Setup for SFTP:
#   - See EXAMPLE_SSH_SETUP.md for SSH key configuration

[logical_volume_root.root]
vg_name = "vg0"
lv_name = "lv_root"
snapshot_size = "2G"
backup_source_path = "/"
exclude_paths = [
    "/dev",
    "/proc",
    "/sys",
    "/tmp",
    "/var/tmp",
    "/run",
]

# Fast local backup
[[logical_volume_root.root.repositories]]
repo_path = "/backups/root-local"
password_file = "/etc/resticlvm/restic-password.txt"
prune_keep_last = 7
prune_keep_daily = 7
prune_keep_weekly = 4
prune_keep_monthly = 3
prune_keep_yearly = 1

  # Copy to remote SFTP server after local backup completes
  [[logical_volume_root.root.repositories.copy_to]]
  repo = "sftp:backup-user@backup-server.example.com:/srv/backups/myhost/root"
  password_file = "/etc/resticlvm/restic-password.txt"
  prune_keep_last = 60
  prune_keep_daily = 60
  prune_keep_weekly = 24
  prune_keep_monthly = 36
  prune_keep_yearly = 10
